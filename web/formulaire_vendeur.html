<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire Acte de Vente - NotaireAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --notaire-gold: #C9A961;
            --notaire-dark: #1a2332;
            --notaire-blue: #2c3e50;
            --notaire-light: #f8f9fa;
            --accent-green: #27ae60;
            --accent-red: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2332 0%, #2c3e50 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* Header avec branding notarial */
        .header {
            background: linear-gradient(135deg, var(--notaire-dark) 0%, var(--notaire-blue) 100%);
            color: white;
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '‚öñ';
            position: absolute;
            font-size: 200px;
            right: -30px;
            top: -50px;
            opacity: 0.1;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: var(--notaire-gold);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
            box-shadow: 0 5px 15px rgba(201, 169, 97, 0.3);
        }

        .logo-text h1 {
            font-size: 28px;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }

        .logo-text p {
            font-size: 14px;
            opacity: 0.9;
            color: var(--notaire-gold);
        }

        .header-subtitle {
            margin-top: 15px;
            font-size: 16px;
            opacity: 0.95;
            line-height: 1.6;
        }

        /* Progress bar */
        .progress-container {
            background: var(--notaire-light);
            padding: 20px 40px;
            border-bottom: 3px solid var(--notaire-gold);
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            color: #666;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: var(--notaire-gold);
            color: white;
            transform: scale(1.1);
        }

        .step.completed .step-number {
            background: var(--accent-green);
            color: white;
        }

        .step-label {
            font-size: 12px;
            color: #666;
            font-weight: 500;
        }

        .progress-bar {
            height: 6px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--notaire-gold) 0%, var(--accent-green) 100%);
            transition: width 0.5s ease;
            width: 0%;
            border-radius: 10px;
        }

        /* Form content */
        .form-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--notaire-light) 0%, #fff 100%);
            border-left: 4px solid var(--notaire-gold);
            border-radius: 8px;
        }

        .section-icon {
            font-size: 32px;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .section-title {
            flex: 1;
        }

        .section-title h2 {
            font-size: 22px;
            color: var(--notaire-dark);
            margin-bottom: 5px;
        }

        .section-title p {
            font-size: 13px;
            color: #666;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--notaire-dark);
            font-weight: 600;
            font-size: 14px;
        }

        label .required {
            color: var(--accent-red);
            margin-left: 3px;
        }

        label .help-icon {
            cursor: help;
            color: #3498db;
            font-size: 12px;
            margin-left: 5px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--notaire-gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 97, 0.1);
        }

        input:valid:not(:placeholder-shown), select:valid:not([value=""]) {
            border-color: var(--accent-green);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .help-text {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
            font-style: italic;
        }

        .radio-group, .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .radio-group label, .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .radio-group input[type="radio"],
        .checkbox-group input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        .conditional {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-left: 3px solid var(--notaire-gold);
            border-radius: 8px;
        }

        /* Navigation buttons */
        .btn-container {
            display: flex;
            gap: 15px;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--notaire-gold) 0%, #d4af37 100%);
            color: white;
            flex: 1;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(201, 169, 97, 0.4);
        }

        .btn-secondary {
            background: #ecf0f1;
            color: var(--notaire-dark);
        }

        .btn-secondary:hover {
            background: #d5dbdb;
        }

        .btn-back {
            background: white;
            border: 2px solid #ddd;
            color: var(--notaire-dark);
        }

        .btn-back:hover {
            border-color: var(--notaire-gold);
            background: var(--notaire-light);
        }

        /* Info boxes */
        .info-box {
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid var(--accent-green);
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .info-box.warning {
            background: #fff3cd;
            border-left-color: #f39c12;
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Multi-person section */
        .person-block {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #e0e0e0;
        }

        .person-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--notaire-gold);
        }

        .person-header h3 {
            color: var(--notaire-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-remove {
            background: var(--accent-red);
            color: white;
            padding: 8px 15px;
            font-size: 14px;
        }

        .btn-add {
            background: var(--accent-green);
            color: white;
            padding: 12px 20px;
            margin-top: 15px;
        }

        /* Summary section */
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .summary-card {
            background: var(--notaire-light);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--notaire-gold);
        }

        .summary-card h4 {
            color: var(--notaire-dark);
            margin-bottom: 10px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #ddd;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: #666;
            font-size: 14px;
        }

        .summary-value {
            font-weight: 600;
            color: var(--notaire-dark);
        }

        @media (max-width: 768px) {
            .form-row, .form-row-3 {
                grid-template-columns: 1fr;
            }

            .form-content {
                padding: 20px;
            }

            .header {
                padding: 25px;
            }

            .progress-steps {
                flex-direction: column;
                gap: 10px;
            }

            .step {
                display: flex;
                align-items: center;
                gap: 15px;
            }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--notaire-dark);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">‚öñ</div>
                    <div class="logo-text">
                        <h1>NotaireAI</h1>
                        <p>Formulaire Acte de Vente Immobili√®re</p>
                    </div>
                </div>
                <div class="header-subtitle">
                    Ce formulaire vous permet de collecter toutes les informations n√©cessaires √† la r√©daction d'un acte de vente conforme. Compl√©tez chaque section avec attention.
                </div>
            </div>
        </div>

        <!-- Progress -->
        <div class="progress-container">
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-label">Informations g√©n√©rales</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-label">Vendeur(s)</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-label">Acqu√©reur(s)</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-label">Le bien</div>
                </div>
                <div class="step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-label">Prix & Financement</div>
                </div>
                <div class="step" data-step="6">
                    <div class="step-number">6</div>
                    <div class="step-label">Diagnostics & Copropri√©t√©</div>
                </div>
                <div class="step" data-step="7">
                    <div class="step-number">7</div>
                    <div class="step-label">R√©capitulatif</div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Form -->
        <form id="vendeurForm" class="form-content">

            <!-- Section 1: Informations g√©n√©rales -->
            <div class="section active" data-section="1">
                <div class="section-header">
                    <div class="section-icon">üìÑ</div>
                    <div class="section-title">
                        <h2>Informations g√©n√©rales</h2>
                        <p>Date et r√©f√©rences de l'acte</p>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Date de signature pr√©vue <span class="required">*</span></label>
                        <input type="date" name="date_signature" required>
                    </div>
                    <div class="form-group">
                        <label>R√©f√©rence dossier</label>
                        <input type="text" name="reference_dossier" placeholder="Ex: 2026-VTE-001">
                    </div>
                </div>

                <div class="form-group">
                    <label>Notaire assistant l'acqu√©reur (si applicable)</label>
                    <input type="text" name="notaire_acquereur" placeholder="Nom et lieu d'exercice">
                </div>
            </div>

            <!-- Section 2: Vendeurs -->
            <div class="section" data-section="2">
                <div class="section-header">
                    <div class="section-icon">üë§</div>
                    <div class="section-title">
                        <h2>Vendeur(s)</h2>
                        <p>Identit√© compl√®te et situation du/des vendeur(s)</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-title">‚ÑπÔ∏è Information importante</div>
                    <p>Toutes les informations doivent √™tre conformes √† l'√©tat civil (carte d'identit√©, acte de naissance).</p>
                </div>

                <div id="vendeursContainer">
                    <!-- Vendeur 1 -->
                    <div class="person-block" data-person="vendeur" data-index="1">
                        <div class="person-header">
                            <h3>üë§ Vendeur 1</h3>
                        </div>

                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Civilit√© <span class="required">*</span></label>
                                <select name="vendeur_1_civilite" required>
                                    <option value="">S√©lectionner</option>
                                    <option value="Monsieur">Monsieur</option>
                                    <option value="Madame">Madame</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Nom de famille <span class="required">*</span></label>
                                <input type="text" name="vendeur_1_nom" required placeholder="NOM">
                            </div>
                            <div class="form-group">
                                <label>Nom de naissance</label>
                                <input type="text" name="vendeur_1_nom_naissance" placeholder="Si diff√©rent">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Pr√©noms (dans l'ordre de l'√©tat civil) <span class="required">*</span></label>
                            <input type="text" name="vendeur_1_prenoms" required placeholder="Jean Pierre Marie">
                            <div class="help-text">Tous les pr√©noms, dans l'ordre exact de l'acte de naissance</div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Profession <span class="required">*</span></label>
                                <input type="text" name="vendeur_1_profession" required>
                            </div>
                            <div class="form-group">
                                <label>Nationalit√©</label>
                                <input type="text" name="vendeur_1_nationalite" value="Fran√ßaise">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Adresse compl√®te <span class="required">*</span></label>
                            <input type="text" name="vendeur_1_adresse" required placeholder="Num√©ro et voie">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Code postal <span class="required">*</span></label>
                                <input type="text" name="vendeur_1_code_postal" required pattern="[0-9]{5}" placeholder="75001">
                            </div>
                            <div class="form-group">
                                <label>Ville <span class="required">*</span></label>
                                <input type="text" name="vendeur_1_ville" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Date de naissance <span class="required">*</span></label>
                                <input type="date" name="vendeur_1_date_naissance" required>
                            </div>
                            <div class="form-group">
                                <label>Lieu de naissance <span class="required">*</span></label>
                                <input type="text" name="vendeur_1_lieu_naissance" required placeholder="Ville et d√©partement">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Situation matrimoniale <span class="required">*</span></label>
                            <select name="vendeur_1_situation_matrimoniale" required onchange="toggleMatrimonial('vendeur', 1, this.value)">
                                <option value="">S√©lectionner</option>
                                <option value="celibataire">C√©libataire</option>
                                <option value="marie">Mari√©(e)</option>
                                <option value="pacse">Pacs√©(e)</option>
                                <option value="divorce">Divorc√©(e)</option>
                                <option value="veuf">Veuf/Veuve</option>
                            </select>
                        </div>

                        <div id="vendeur_1_marie_details" class="conditional" style="display: none;">
                            <h4 style="margin-bottom: 15px; color: var(--notaire-dark);">D√©tails mariage</h4>
                            <div class="form-group">
                                <label>R√©gime matrimonial</label>
                                <select name="vendeur_1_regime_matrimonial">
                                    <option value="">S√©lectionner</option>
                                    <option value="communaute_reduite">Communaut√© r√©duite aux acqu√™ts</option>
                                    <option value="separation_biens">S√©paration de biens</option>
                                    <option value="communaute_universelle">Communaut√© universelle</option>
                                    <option value="participation_acquets">Participation aux acqu√™ts</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Date du contrat de mariage</label>
                                    <input type="date" name="vendeur_1_date_mariage">
                                </div>
                                <div class="form-group">
                                    <label>Notaire ayant re√ßu le contrat</label>
                                    <input type="text" name="vendeur_1_notaire_mariage">
                                </div>
                            </div>
                        </div>

                        <div id="vendeur_1_pacse_details" class="conditional" style="display: none;">
                            <h4 style="margin-bottom: 15px; color: var(--notaire-dark);">D√©tails PACS</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Date du PACS</label>
                                    <input type="date" name="vendeur_1_date_pacs">
                                </div>
                                <div class="form-group">
                                    <label>Lieu d'enregistrement</label>
                                    <input type="text" name="vendeur_1_lieu_pacs" placeholder="Mairie ou notaire">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Quotit√© vendue (%) <span class="required">*</span></label>
                            <input type="number" name="vendeur_1_quotite" required min="0" max="100" step="0.01" placeholder="100">
                            <div class="help-text">La somme des quotit√©s de tous les vendeurs doit √™tre √©gale √† 100%</div>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn-add" onclick="addPerson('vendeur')">+ Ajouter un vendeur</button>
            </div>

            <!-- Section 3: Acqu√©reurs -->
            <div class="section" data-section="3">
                <div class="section-header">
                    <div class="section-icon">üë•</div>
                    <div class="section-title">
                        <h2>Acqu√©reur(s)</h2>
                        <p>Identit√© compl√®te et situation du/des acqu√©reur(s)</p>
                    </div>
                </div>

                <div id="acquereursContainer">
                    <!-- Acqu√©reur 1 -->
                    <div class="person-block" data-person="acquereur" data-index="1">
                        <div class="person-header">
                            <h3>üë• Acqu√©reur 1</h3>
                        </div>

                        <!-- M√™me structure que vendeur -->
                        <div class="form-row-3">
                            <div class="form-group">
                                <label>Civilit√© <span class="required">*</span></label>
                                <select name="acquereur_1_civilite" required>
                                    <option value="">S√©lectionner</option>
                                    <option value="Monsieur">Monsieur</option>
                                    <option value="Madame">Madame</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Nom de famille <span class="required">*</span></label>
                                <input type="text" name="acquereur_1_nom" required>
                            </div>
                            <div class="form-group">
                                <label>Nom de naissance</label>
                                <input type="text" name="acquereur_1_nom_naissance">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Pr√©noms (dans l'ordre de l'√©tat civil) <span class="required">*</span></label>
                            <input type="text" name="acquereur_1_prenoms" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Profession <span class="required">*</span></label>
                                <input type="text" name="acquereur_1_profession" required>
                            </div>
                            <div class="form-group">
                                <label>Nationalit√©</label>
                                <input type="text" name="acquereur_1_nationalite" value="Fran√ßaise">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Adresse compl√®te <span class="required">*</span></label>
                            <input type="text" name="acquereur_1_adresse" required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Code postal <span class="required">*</span></label>
                                <input type="text" name="acquereur_1_code_postal" required pattern="[0-9]{5}">
                            </div>
                            <div class="form-group">
                                <label>Ville <span class="required">*</span></label>
                                <input type="text" name="acquereur_1_ville" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Date de naissance <span class="required">*</span></label>
                                <input type="date" name="acquereur_1_date_naissance" required>
                            </div>
                            <div class="form-group">
                                <label>Lieu de naissance <span class="required">*</span></label>
                                <input type="text" name="acquereur_1_lieu_naissance" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Situation matrimoniale <span class="required">*</span></label>
                            <select name="acquereur_1_situation_matrimoniale" required onchange="toggleMatrimonial('acquereur', 1, this.value)">
                                <option value="">S√©lectionner</option>
                                <option value="celibataire">C√©libataire</option>
                                <option value="marie">Mari√©(e)</option>
                                <option value="pacse">Pacs√©(e)</option>
                                <option value="divorce">Divorc√©(e)</option>
                                <option value="veuf">Veuf/Veuve</option>
                            </select>
                        </div>

                        <div id="acquereur_1_marie_details" class="conditional" style="display: none;">
                            <h4 style="margin-bottom: 15px; color: var(--notaire-dark);">D√©tails mariage</h4>
                            <div class="form-group">
                                <label>R√©gime matrimonial</label>
                                <select name="acquereur_1_regime_matrimonial">
                                    <option value="">S√©lectionner</option>
                                    <option value="communaute_reduite">Communaut√© r√©duite aux acqu√™ts</option>
                                    <option value="separation_biens">S√©paration de biens</option>
                                    <option value="communaute_universelle">Communaut√© universelle</option>
                                    <option value="participation_acquets">Participation aux acqu√™ts</option>
                                </select>
                            </div>
                        </div>

                        <div id="acquereur_1_pacse_details" class="conditional" style="display: none;">
                            <h4 style="margin-bottom: 15px; color: var(--notaire-dark);">D√©tails PACS</h4>
                            <div class="form-group">
                                <label>Date du PACS</label>
                                <input type="date" name="acquereur_1_date_pacs">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Primo-acc√©dant ?
                                <span class="tooltip">
                                    <span class="help-icon">‚ÑπÔ∏è</span>
                                    <span class="tooltiptext">Permet de b√©n√©ficier de droits de mutation r√©duits</span>
                                </span>
                            </label>
                            <div class="radio-group">
                                <label><input type="radio" name="acquereur_1_primo_accedant" value="oui"> Oui</label>
                                <label><input type="radio" name="acquereur_1_primo_accedant" value="non" checked> Non</label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Quotit√© acquise (%) <span class="required">*</span></label>
                            <input type="number" name="acquereur_1_quotite" required min="0" max="100" step="0.01" placeholder="100">
                        </div>
                    </div>
                </div>

                <button type="button" class="btn-add" onclick="addPerson('acquereur')">+ Ajouter un acqu√©reur</button>
            </div>

            <!-- Section 4: Le bien -->
            <div class="section" data-section="4">
                <div class="section-header">
                    <div class="section-icon">üè†</div>
                    <div class="section-title">
                        <h2>Le bien vendu</h2>
                        <p>Description compl√®te et cadastre</p>
                    </div>
                </div>

                <h3 style="color: var(--notaire-dark); margin-bottom: 20px;">üìç Localisation</h3>

                <div class="form-group">
                    <label>Adresse du bien <span class="required">*</span></label>
                    <input type="text" name="bien_adresse" required placeholder="Num√©ro et voie">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Code postal <span class="required">*</span></label>
                        <input type="text" name="bien_code_postal" required pattern="[0-9]{5}">
                    </div>
                    <div class="form-group">
                        <label>Ville <span class="required">*</span></label>
                        <input type="text" name="bien_ville" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Nom de la r√©sidence/copropri√©t√©</label>
                    <input type="text" name="bien_residence">
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üìã R√©f√©rences cadastrales</h3>

                <div class="form-row-3">
                    <div class="form-group">
                        <label>Section</label>
                        <input type="text" name="cadastre_section" placeholder="AB">
                    </div>
                    <div class="form-group">
                        <label>Parcelle</label>
                        <input type="text" name="cadastre_parcelle" placeholder="123">
                    </div>
                    <div class="form-group">
                        <label>Surface cadastrale</label>
                        <input type="text" name="cadastre_surface" placeholder="00 ha 28 a 21 ca">
                    </div>
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üè¢ Lots de copropri√©t√©</h3>

                <div id="lotsContainer">
                    <div class="person-block" data-lot="1">
                        <div class="person-header">
                            <h3>Lot n¬∞1</h3>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>Num√©ro du lot <span class="required">*</span></label>
                                <input type="text" name="lot_1_numero" required placeholder="45">
                            </div>
                            <div class="form-group">
                                <label>Type <span class="required">*</span></label>
                                <select name="lot_1_type" required>
                                    <option value="">S√©lectionner</option>
                                    <option value="appartement">Appartement</option>
                                    <option value="parking">Parking</option>
                                    <option value="cave">Cave</option>
                                    <option value="garage">Garage</option>
                                    <option value="local_commercial">Local commercial</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Description</label>
                            <textarea name="lot_1_description" placeholder="Ex: Appartement de type T3..."></textarea>
                        </div>

                        <div class="form-row-3">
                            <div class="form-group">
                                <label>√âtage</label>
                                <input type="text" name="lot_1_etage" placeholder="2√®me">
                            </div>
                            <div class="form-group">
                                <label>Surface Carrez (m¬≤)</label>
                                <input type="number" name="lot_1_surface_carrez" step="0.01" placeholder="65.50">
                            </div>
                            <div class="form-group">
                                <label>Tanti√®mes</label>
                                <input type="text" name="lot_1_tantiemes" placeholder="250/10000">
                            </div>
                        </div>
                    </div>
                </div>

                <button type="button" class="btn-add" onclick="addLot()">+ Ajouter un lot</button>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üìê Origine de propri√©t√©</h3>

                <div class="form-group">
                    <label>Mode d'acquisition <span class="required">*</span></label>
                    <select name="origine_type" required>
                        <option value="">S√©lectionner</option>
                        <option value="achat">Achat</option>
                        <option value="donation">Donation</option>
                        <option value="succession">Succession</option>
                        <option value="construction">Construction</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Date de l'acte d'acquisition</label>
                        <input type="date" name="origine_date">
                    </div>
                    <div class="form-group">
                        <label>Notaire ayant re√ßu l'acte</label>
                        <input type="text" name="origine_notaire">
                    </div>
                </div>
            </div>

            <!-- Section 5: Prix & Financement -->
            <div class="section" data-section="5">
                <div class="section-header">
                    <div class="section-icon">üí∞</div>
                    <div class="section-title">
                        <h2>Prix et financement</h2>
                        <p>Conditions financi√®res de la vente</p>
                    </div>
                </div>

                <h3 style="color: var(--notaire-dark); margin-bottom: 20px;">üíµ Prix de vente</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label>Prix total (‚Ç¨) <span class="required">*</span></label>
                        <input type="number" name="prix_total" required min="0" step="0.01" placeholder="250000">
                    </div>
                    <div class="form-group">
                        <label>Dont mobilier inclus (‚Ç¨)</label>
                        <input type="number" name="prix_mobilier" min="0" step="0.01" placeholder="2000">
                    </div>
                </div>

                <div class="form-group">
                    <label>Meubles inclus dans la vente ?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="meubles_inclus" value="oui" onchange="toggleMeubles(true)"> Oui</label>
                        <label><input type="radio" name="meubles_inclus" value="non" checked onchange="toggleMeubles(false)"> Non</label>
                    </div>
                </div>

                <div id="meublesDetails" class="conditional" style="display: none;">
                    <div class="form-group">
                        <label>Liste des meubles</label>
                        <textarea name="liste_meubles" placeholder="Cuisine √©quip√©e, luminaires, etc."></textarea>
                    </div>
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üè¶ Financement</h3>

                <div class="form-group">
                    <label>Mode de paiement <span class="required">*</span></label>
                    <select name="mode_paiement" required onchange="toggleFinancement(this.value)">
                        <option value="">S√©lectionner</option>
                        <option value="comptant">Comptant</option>
                        <option value="pret">Avec pr√™t bancaire</option>
                        <option value="mixte">Mixte (comptant + pr√™t)</option>
                    </select>
                </div>

                <div id="pretDetails" class="conditional" style="display: none;">
                    <div id="pretsContainer">
                        <div class="person-block" data-pret="1">
                            <div class="person-header">
                                <h3>Pr√™t n¬∞1</h3>
                            </div>

                            <div class="form-group">
                                <label>√âtablissement pr√™teur</label>
                                <input type="text" name="pret_1_banque" placeholder="Nom de la banque">
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Montant (‚Ç¨)</label>
                                    <input type="number" name="pret_1_montant" min="0" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label>Dur√©e (mois)</label>
                                    <input type="number" name="pret_1_duree" min="1" placeholder="240">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label>Taux nominal (%)</label>
                                    <input type="number" name="pret_1_taux" step="0.01" placeholder="1.50">
                                </div>
                                <div class="form-group">
                                    <label>Type de pr√™t</label>
                                    <select name="pret_1_type">
                                        <option value="">S√©lectionner</option>
                                        <option value="classique">Pr√™t classique</option>
                                        <option value="ptz">PTZ (Pr√™t √† Taux Z√©ro)</option>
                                        <option value="accession_sociale">Pr√™t Accession Sociale</option>
                                        <option value="action_logement">Action Logement</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn-add" onclick="addPret()">+ Ajouter un pr√™t</button>
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">ü§ù Agent immobilier</h3>

                <div class="form-group">
                    <label>Un agent immobilier est-il intervenu ?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="agent_present" value="oui" onchange="toggleAgent(true)"> Oui</label>
                        <label><input type="radio" name="agent_present" value="non" checked onchange="toggleAgent(false)"> Non</label>
                    </div>
                </div>

                <div id="agentDetails" class="conditional" style="display: none;">
                    <div class="form-group">
                        <label>Nom de l'agence</label>
                        <input type="text" name="agent_nom">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Montant honoraires TTC (‚Ç¨)</label>
                            <input type="number" name="agent_honoraires" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label>√Ä la charge de</label>
                            <select name="agent_charge">
                                <option value="">S√©lectionner</option>
                                <option value="vendeur">Vendeur</option>
                                <option value="acquereur">Acqu√©reur</option>
                                <option value="partage">Partag√©</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 6: Diagnostics & Copropri√©t√© -->
            <div class="section" data-section="6">
                <div class="section-header">
                    <div class="section-icon">üìä</div>
                    <div class="section-title">
                        <h2>Diagnostics et copropri√©t√©</h2>
                        <p>Informations techniques et r√©glementaires</p>
                    </div>
                </div>

                <div class="info-box warning">
                    <div class="info-box-title">‚ö†Ô∏è Diagnostics obligatoires</div>
                    <p>Ces diagnostics doivent √™tre annex√©s √† l'acte de vente sous peine de nullit√©.</p>
                </div>

                <h3 style="color: var(--notaire-dark); margin-bottom: 20px;">üî¨ Diagnostics techniques</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label>DPE - Classe √©nerg√©tique <span class="required">*</span></label>
                        <select name="dpe_classe" required>
                            <option value="">S√©lectionner</option>
                            <option value="A">A (Excellent)</option>
                            <option value="B">B (Tr√®s performant)</option>
                            <option value="C">C (Performant)</option>
                            <option value="D">D (Moyen)</option>
                            <option value="E">E (Peu performant)</option>
                            <option value="F">F (Passoire thermique)</option>
                            <option value="G">G (Tr√®s √©nergivore)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Classe GES <span class="required">*</span></label>
                        <select name="ges_classe" required>
                            <option value="">S√©lectionner</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="C">C</option>
                            <option value="D">D</option>
                            <option value="E">E</option>
                            <option value="F">F</option>
                            <option value="G">G</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Date du DPE</label>
                        <input type="date" name="dpe_date">
                    </div>
                    <div class="form-group">
                        <label>Num√©ro ADEME</label>
                        <input type="text" name="dpe_numero_ademe">
                    </div>
                </div>

                <div class="checkbox-group" style="margin: 20px 0;">
                    <label><input type="checkbox" name="diag_amiante"> Diagnostic amiante effectu√©</label>
                    <label><input type="checkbox" name="diag_plomb"> Diagnostic plomb effectu√©</label>
                    <label><input type="checkbox" name="diag_termites"> Diagnostic termites effectu√©</label>
                    <label><input type="checkbox" name="diag_electricite"> Installation √©lectrique</label>
                    <label><input type="checkbox" name="diag_gaz"> Installation gaz</label>
                    <label><input type="checkbox" name="diag_erp"> √âtat des risques et pollutions</label>
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üè¢ Informations copropri√©t√©</h3>

                <div class="form-group">
                    <label>Nom du syndic</label>
                    <input type="text" name="syndic_nom">
                </div>

                <div class="form-group">
                    <label>Adresse du syndic</label>
                    <input type="text" name="syndic_adresse">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>N¬∞ immatriculation copropri√©t√©</label>
                        <input type="text" name="copro_immatriculation">
                    </div>
                    <div class="form-group">
                        <label>Quote-part fonds travaux (‚Ç¨)</label>
                        <input type="number" name="fonds_travaux" min="0" step="0.01">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Charges annuelles (‚Ç¨)</label>
                        <input type="number" name="charges_annuelles" min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Budget pr√©visionnel (‚Ç¨)</label>
                        <input type="number" name="budget_previsionnel" min="0" step="0.01">
                    </div>
                </div>

                <h3 style="color: var(--notaire-dark); margin: 30px 0 20px;">üìÖ √âtat descriptif de division</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label>Date de l'EDD</label>
                        <input type="date" name="edd_date">
                    </div>
                    <div class="form-group">
                        <label>Notaire ayant re√ßu l'EDD</label>
                        <input type="text" name="edd_notaire">
                    </div>
                </div>

                <div class="form-group">
                    <label>Y a-t-il eu des modificatifs ?</label>
                    <div class="radio-group">
                        <label><input type="radio" name="edd_modificatifs" value="oui" onchange="toggleModificatifs(true)"> Oui</label>
                        <label><input type="radio" name="edd_modificatifs" value="non" checked onchange="toggleModificatifs(false)"> Non</label>
                    </div>
                </div>

                <div id="modificatifsDetails" class="conditional" style="display: none;">
                    <div class="form-group">
                        <label>D√©tails des modificatifs</label>
                        <textarea name="edd_modificatifs_details" placeholder="Date, notaire, objet des modificatifs"></textarea>
                    </div>
                </div>
            </div>

            <!-- Section 7: R√©capitulatif -->
            <div class="section" data-section="7">
                <div class="section-header">
                    <div class="section-icon">‚úÖ</div>
                    <div class="section-title">
                        <h2>R√©capitulatif</h2>
                        <p>V√©rification finale avant g√©n√©ration</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-box-title">‚úì Validation</div>
                    <p>V√©rifiez attentivement toutes les informations avant de g√©n√©rer l'acte.</p>
                </div>

                <div class="summary-grid" id="summaryGrid">
                    <!-- Sera rempli dynamiquement par JS -->
                </div>

                <div class="btn-container">
                    <button type="button" class="btn-secondary" onclick="exportJSON()">üì• Exporter JSON</button>
                    <button type="submit" class="btn-primary">üìÑ G√©n√©rer l'acte de vente</button>
                </div>
            </div>

            <!-- Navigation buttons -->
            <div class="btn-container" id="navigationButtons">
                <button type="button" class="btn-back" onclick="previousSection()">‚Üê Pr√©c√©dent</button>
                <button type="button" class="btn-primary" onclick="nextSection()">Suivant ‚Üí</button>
            </div>
        </form>
    </div>

    <script>
        let currentSection = 1;
        const totalSections = 7;
        let vendeurCount = 1;
        let acquereurCount = 1;
        let lotCount = 1;
        let pretCount = 1;

        // Section navigation
        function showSection(sectionNum) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelector(`[data-section="${sectionNum}"]`).classList.add('active');

            // Update steps
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < sectionNum) step.classList.add('completed');
                if (index + 1 === sectionNum) step.classList.add('active');
            });

            // Update progress bar
            const progress = ((sectionNum - 1) / (totalSections - 1)) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            // Show/hide navigation
            const navButtons = document.getElementById('navigationButtons');
            if (sectionNum === totalSections) {
                navButtons.style.display = 'none';
                generateSummary();
            } else {
                navButtons.style.display = 'flex';
            }

            window.scrollTo(0, 0);
        }

        function nextSection() {
            if (currentSection < totalSections) {
                currentSection++;
                showSection(currentSection);
            }
        }

        function previousSection() {
            if (currentSection > 1) {
                currentSection--;
                showSection(currentSection);
            }
        }

        // Toggle conditional fields
        function toggleMatrimonial(type, index, value) {
            const marieDetails = document.getElementById(`${type}_${index}_marie_details`);
            const pacseDetails = document.getElementById(`${type}_${index}_pacse_details`);

            if (marieDetails) marieDetails.style.display = 'none';
            if (pacseDetails) pacseDetails.style.display = 'none';

            if (value === 'marie' && marieDetails) marieDetails.style.display = 'block';
            if (value === 'pacse' && pacseDetails) pacseDetails.style.display = 'block';
        }

        function toggleMeubles(show) {
            document.getElementById('meublesDetails').style.display = show ? 'block' : 'none';
        }

        function toggleFinancement(mode) {
            const pretDetails = document.getElementById('pretDetails');
            pretDetails.style.display = (mode === 'pret' || mode === 'mixte') ? 'block' : 'none';
        }

        function toggleAgent(show) {
            document.getElementById('agentDetails').style.display = show ? 'block' : 'none';
        }

        function toggleModificatifs(show) {
            document.getElementById('modificatifsDetails').style.display = show ? 'block' : 'none';
        }

        // Add person/lot/pret
        function addPerson(type) {
            const container = document.getElementById(`${type}sContainer`);
            const count = type === 'vendeur' ? ++vendeurCount : ++acquereurCount;

            const newBlock = createPersonBlock(type, count);
            container.appendChild(newBlock);
        }

        function createPersonBlock(type, index) {
            const template = document.querySelector(`[data-person="${type}"][data-index="1"]`);
            const clone = template.cloneNode(true);

            clone.setAttribute('data-index', index);
            clone.querySelector('.person-header h3').textContent = `${type === 'vendeur' ? 'üë§ Vendeur' : 'üë• Acqu√©reur'} ${index}`;

            // Add remove button
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'btn-remove';
            removeBtn.textContent = '√ó Supprimer';
            removeBtn.onclick = () => clone.remove();
            clone.querySelector('.person-header').appendChild(removeBtn);

            // Update input names
            clone.querySelectorAll('input, select').forEach(input => {
                const name = input.getAttribute('name');
                if (name) {
                    input.setAttribute('name', name.replace(/_1_/, `_${index}_`));
                    input.value = '';
                }
            });

            return clone;
        }

        function addLot() {
            const container = document.getElementById('lotsContainer');
            lotCount++;

            const template = document.querySelector('[data-lot="1"]');
            const clone = template.cloneNode(true);
            clone.setAttribute('data-lot', lotCount);
            clone.querySelector('h3').textContent = `Lot n¬∞${lotCount}`;

            // Add remove button
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'btn-remove';
            removeBtn.textContent = '√ó Supprimer';
            removeBtn.onclick = () => clone.remove();
            clone.querySelector('.person-header').appendChild(removeBtn);

            // Update names
            clone.querySelectorAll('input, select, textarea').forEach(input => {
                const name = input.getAttribute('name');
                if (name) {
                    input.setAttribute('name', name.replace(/_1_/, `_${lotCount}_`));
                    input.value = '';
                }
            });

            container.appendChild(clone);
        }

        function addPret() {
            const container = document.getElementById('pretsContainer');
            pretCount++;

            const template = document.querySelector('[data-pret="1"]');
            const clone = template.cloneNode(true);
            clone.setAttribute('data-pret', pretCount);
            clone.querySelector('h3').textContent = `Pr√™t n¬∞${pretCount}`;

            // Add remove button
            const removeBtn = document.createElement('button');
            removeBtn.type = 'button';
            removeBtn.className = 'btn-remove';
            removeBtn.textContent = '√ó Supprimer';
            removeBtn.onclick = () => clone.remove();
            clone.querySelector('.person-header').appendChild(removeBtn);

            // Update names
            clone.querySelectorAll('input, select').forEach(input => {
                const name = input.getAttribute('name');
                if (name) {
                    input.setAttribute('name', name.replace(/_1_/, `_${pretCount}_`));
                    input.value = '';
                }
            });

            container.appendChild(clone);
        }

        // Generate summary
        function generateSummary() {
            const formData = new FormData(document.getElementById('vendeurForm'));
            const summaryGrid = document.getElementById('summaryGrid');
            summaryGrid.innerHTML = '';

            const sections = [
                { title: 'Acte', icon: 'üìÑ', fields: ['date_signature', 'reference_dossier'] },
                { title: 'Bien', icon: 'üè†', fields: ['bien_adresse', 'bien_ville'] },
                { title: 'Prix', icon: 'üí∞', fields: ['prix_total', 'mode_paiement'] },
                { title: 'DPE', icon: '‚ö°', fields: ['dpe_classe', 'ges_classe'] }
            ];

            sections.forEach(section => {
                const card = document.createElement('div');
                card.className = 'summary-card';
                card.innerHTML = `<h4>${section.icon} ${section.title}</h4>`;

                section.fields.forEach(field => {
                    const value = formData.get(field);
                    if (value) {
                        const item = document.createElement('div');
                        item.className = 'summary-item';
                        item.innerHTML = `
                            <span class="summary-label">${field.replace(/_/g, ' ')}</span>
                            <span class="summary-value">${value}</span>
                        `;
                        card.appendChild(item);
                    }
                });

                summaryGrid.appendChild(card);
            });
        }

        // Export JSON
        function exportJSON() {
            const formData = new FormData(document.getElementById('vendeurForm'));
            const data = {};

            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }

            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `donnees_vente_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        // Form submission
        document.getElementById('vendeurForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Validate quotites
            let totalQuotitesVendeurs = 0;
            for (let i = 1; i <= vendeurCount; i++) {
                const quotite = parseFloat(document.querySelector(`[name="vendeur_${i}_quotite"]`)?.value || 0);
                totalQuotitesVendeurs += quotite;
            }

            let totalQuotitesAcquereurs = 0;
            for (let i = 1; i <= acquereurCount; i++) {
                const quotite = parseFloat(document.querySelector(`[name="acquereur_${i}_quotite"]`)?.value || 0);
                totalQuotitesAcquereurs += quotite;
            }

            if (Math.abs(totalQuotitesVendeurs - 100) > 0.01) {
                alert(`‚ö†Ô∏è Erreur: Les quotit√©s vendues doivent totaliser 100% (actuellement: ${totalQuotitesVendeurs.toFixed(2)}%)`);
                return;
            }

            if (Math.abs(totalQuotitesAcquereurs - 100) > 0.01) {
                alert(`‚ö†Ô∏è Erreur: Les quotit√©s acquises doivent totaliser 100% (actuellement: ${totalQuotitesAcquereurs.toFixed(2)}%)`);
                return;
            }

            alert('‚úÖ Formulaire valid√© ! Exportation des donn√©es...');
            exportJSON();
        });

        // Initialize
        showSection(1);
    </script>
</body>
</html>
